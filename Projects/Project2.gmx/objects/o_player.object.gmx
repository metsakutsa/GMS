<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init

target_x = x;
target_y = y;
moving = false;
encounter = false;
target_enemy = noone;

image_speed = 0;

spd = 4;
grid = 32;


//Sliding view
view_x = view_xview;
view_y = view_yview;

view_x1 = view_x;
view_y1 = view_y;

view_xspeed = grid;
view_yspeed = grid/2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Sliding view
if x &gt; view_x + view_wview view_x += view_wview;   //Right
if x &lt; view_x view_x -= view_wview;                //Left
if y &gt; view_y + view_hview view_y += view_hview;   //Down
if y &lt; view_y view_y -= view_hview;                //Up

if view_x1 &lt; view_x view_x1 = min(view_x, view_x1 + view_xspeed);
if view_x1 &gt; view_x view_x1 = max(view_x, view_x1 - view_xspeed);
if view_y1 &lt; view_y view_y1 = min(view_y, view_y1 + view_yspeed);
if view_y1 &gt; view_y view_y1 = max(view_y, view_y1 - view_yspeed);

view_xview = view_x1;
view_yview = view_y1;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Player movement

if not encounter {

//Move the player
if target_x &gt; x {x += spd};
if target_x &lt; x {x -= spd};
if target_y &gt; y {y += spd};
if target_y &lt; y {y -= spd};


//Check for target
if target_x == x and target_y == y {
    moving = false;
    image_speed = 0;
    image_index = 0;
}


//Handle input
if keyboard_check_pressed(ord("A")) and !moving and not place_meeting(x-32, y, o_collider){
    moving = true;
    target_x -= 32;
    image_speed = 0.3;
}

if keyboard_check_pressed(ord("D")) and !moving and not place_meeting(x+32, y, o_collider){
    moving = true;
    target_x += 32;
    image_speed = 0.3;
} 

if keyboard_check_pressed(ord("W")) and !moving and not place_meeting(x, y-32, o_collider){
    moving = true;
    target_y -= 32;
    image_speed = 0.3;
} 

if keyboard_check_pressed(ord("S")) and !moving and not place_meeting(x, y+32, o_collider){
    moving = true;
    target_y += 32;
    image_speed = 0.3;
}
} 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initiate encounter when player bordering

with o_enemy{
    if place_meeting(x-1, y, o_player){
        o_player.target_enemy = id;
    } else
    if place_meeting(x+1, y, o_player){
        o_player.target_enemy = id;
    } else
    if place_meeting(x, y-1, o_player){
        o_player.target_enemy = id;
    } else
    if place_meeting(x, y+1, o_player){
        o_player.target_enemy = id;
    } else 
    target_enemy = noone;
}

if place_meeting(x+1,y,o_enemy) and encounter == false and moving == false and !target_enemy.encountered{
    encounter = true;
    image_speed = 0;
    change_room(r_battle);
    target_enemy.encountered = true;
}

else if place_meeting(x-1,y,o_enemy) and encounter == false and moving == false and !target_enemy.encountered{
    encounter = true;
    image_speed = 0;
    change_room(r_battle);
    target_enemy.encountered = true;
}

else if place_meeting(x,y+1,o_enemy) and encounter == false and moving == false and !target_enemy.encountered{
    encounter = true;
    image_speed = 0;
    change_room(r_battle);
    target_enemy.encountered = true;
}

else if place_meeting(x,y-1,o_enemy) and encounter == false and moving == false and !target_enemy.encountered{
    encounter = true;
    image_speed = 0;
    change_room(r_battle);
    target_enemy.encountered = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
